<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE-edge">
    <meta name="viewport" content="width = device-width, initial-scale = 1">
    <!--------------------------------------------------------------------------------------------------------------------->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <title>Cheers</title>
    <link rel="stylesheet" type="text/css" href="/res/css/header.css"> <!--Our custom style sheet-->
    <link rel="stylesheet" type="text/css" href="/res/css/managementTools.css"> <!--Our custom style sheet-->

    <script>
        $(document).ready(function () {
            $("#btnGrab").click(function () {
                var userID = $("#userIDtext").val();

                //Get user object as JSON from server where result contains a user object or an errors object
                $.getJSON("/manage/user?id=" + userID, function (result) {
                    //Update user form
                    let user = result.user;
                    if (user) {
                        $("#MU1").val(user.firstName);
                        $("#MU2").val(user.lastName);
                        $("#MU3").val(user.address);
                        $("#MU4").val(user.phoneNumber);
                        $("#MU5").val(user.email);
                        $("#MU6").val(user.ccn);
                        $("#MU7").val(user.seasonTicketSeat);
                    }
                    //Update error alert if there were any alerts.
                    display_errors(result.errors);
                });
            });
        });

        function display_errors(errors) {
            var errorHtml = '';
            if (errors) {
                errorHtml = '<div class="alert alert-danger fade in">' +
                    '<a class="close" data-dismiss="alert">&times;</a>' +
                    '<strong>Error!</strong>';
                $.each(errors, function (index, value) {
                    errorHtml += '<br>*' + value;
                });
                errorHtml += '</div>'
            }
            $("#create_edit_user_errors").html(errorHtml);

        }
    </script>
</head>
<body id="template">
<header id=mainHeader class="header3">
    <div class="container-fluid">
        <div id="header_Links" class="row">
            <div id="links_Ham" class="burger">
                <div class="burger-line">
                </div>
                <div class="burger-line">
                </div>
                <div class="burger-line">
                </div>
            </div>

            <div class="topnav">
                <a href="/">
                    <img id="logoImg" src="/res/img/chargerLogo.png">
                    <span id="logoText">Cheers</span>
                </a>
                <div class="topnav-right">
                    <a href="/">Home</a>
                    <a href="/about">About Us</a>
                    <a href="/tickets">Tickets</a>
                    <a href="/manage">Management Tools</a>
                </div>
            </div>
        </div>
    </div>
</header>

<div id="centCon" class="container-fluid">
    <div id="create_edit_user_errors"></div>
    <div class="row">
        <div class="column left" style="background-color:#f1f1f1">
            <div class="tab">
                <button class="tablinks" onclick="openTool(event, 'Create/Edit User')">Create/Edit</button>
                <button class="tablinks" onclick="openTool(event, 'STH Manager')">STH Manager</button>
                <button class="tablinks" onclick="openTool(event, 'Exchange Tickets')">Exchange Tickets</button>
                <button class="tablinks" onclick="openTool(event, 'Ticket Manager')">Ticket Manager</button>
            </div>

            <!-- Tab content -->
            <div id="Create/Edit User" class="tabcontent">
                <h3>Manager Users</h3>
                <form>
                    <label for="userIDtext">User ID: </label><input id="userIDtext" type="text">
                    <span><input id="btnGrab" type="button" value="Grab User"></span><br>
                    <label for="MU1">First name: </label><input id="MU1" type="text"><br>
                    <label for="MU2">Last name: </label><input id="MU2" type="text"><br>
                    <label for="MU3">Address: </label><input id="MU3" type="text"><br>
                    <label for="MU4">Phone Number: </label><input id="MU4" type="text"><br>
                    <label for="MU5">Email: </label><input id="MU5" type="text"><br>
                    <label for="MU6">CCN: </label><input id="MU6" type="text"><br>
                    <label for="MU7">Season Ticket Seat: </label><input id="MU7" type="text"><br>
                </form>

                <button>Add</button>
                <button>Update</button>
                <button>Delete</button>
                <br>
                <br>
                <button>Display All Users</button>

                <table name="userTable" style="display:none"> <!-- THIS TABLE IS HIDDEN BY DEFAULT-->
                    <tr>
                        <th>WHAT</th>
                        <th>FIELDS</th>
                        <th>HERE?</th>
                    </tr>
                    <tr>
                        <td>This should be</td>
                        <td>Hidden</td>
                        <td>By Default</td>
                    </tr>
                </table>

            </div>

            <div id="STH Manager" class="tabcontent">
                <h3>Manage Season Ticket Holders</h3>

                UserID: <input type="text" name="FirstName" value=""><br>
                Pick Seat: <input type="text" name="LastName" value=""><span><button>Submit</button></span><br>

                <button>Export</button>
                <button>Notify to Renew</button>
            </div>

            <div id="Exchange Tickets" class="tabcontent">
                <h3>Exchange Tickets</h3>
                Ticket 1: <input type="text" name="FirstName" value=""><br>
                Ticket 2: <input type="text" name="FirstName" value=""><span><button>Exchange</button></span><br>
                <br>

                <button>Display Available</button>
                <br>
                <table name="ticketTable" style="display:none"> <!-- THIS TABLE IS HIDDEN BY DEFAULT-->
                    <tr>
                        <th>WHAT</th>
                        <th>FIELDS</th>
                        <th>HERE?</th>
                        <th></th>
                    </tr>
                    <tr>
                        <td>This should be</td>
                        <td>Hidden</td>
                        <td>By Default</td>
                        <td>
                            <button>Add</button>
                        </td>
                    </tr>
                </table>
            </div>

            <div id="Ticket Manager" class="tabcontent">
                <h3>Manage Tickets</h3>
                Ticket ID: <input type="text" name="FirstName" value=""><span><button>Check Status</button></span><br>
                <br>
                <button>Display All Tickets</button>
                <br>
                <table name="managerTable" style="display:none"> <!-- THIS TABLE IS HIDDEN BY DEFAULT-->
                    <tr>
                        <th>WHAT</th>
                        <th>FIELDS</th>
                        <th>HERE?</th>
                        <th>Check Paid Status</th>
                    </tr>
                    <tr>
                        <td>This should be</td>
                        <td>Hidden</td>
                        <td>By Default</td>
                        <td>
                            <button>Check Status</button>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="column right" style="background-color:#aaa">
            <h2>Helpful Tips</h2>
            <p>Hilarious splashed goodness brief the much amoral far coldly more uncritically thought normal grave much
                dear thus ouch far across less a pouted well excepting far goodness as falcon recast peaceful outgrew
                much justly threw.

                Dear and far one rabbit yet spilled house far when one one alas out a jeez glibly pious compulsive ahead
                popularly therefore.
            </p>
        </div>
    </div>

</div>


<script>
    function openTool(evt, toolName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(toolName).style.display = "block";
        evt.currentTarget.className += " active";
    }
</script>

</body>
</html>
